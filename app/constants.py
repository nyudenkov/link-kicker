from typing import Any

from app.bot.middlewares import i18n

_ = i18n.gettext


class Constants:
    """
    A base class for defining a class with a set of constants.
    Implements property "all" to get all values of constants.
    The child class attributes must be set in upper case.
    """

    value_type: Any

    @classmethod
    def all(cls) -> tuple:
        keys = [
            key
            for key, value in cls.__dict__.items()
            if isinstance(value, cls.value_type) and key.isupper()
        ]
        return tuple([getattr(cls, key) for key in keys])


class StrConstants(Constants):
    """
    A base class for defining a class with a set of string constants.

    Examples
    --------
    >>> class ExampleClass(object, metaclass=StrConstants):
    ...     FIRST = 'first'
    ...     SECOND = 'second'
    ...     THIRD = 'third'
    ...
    >>> print(ExampleClass.all())
    ... ('first', 'second', 'third')
    >>> print(ExampleClass.FIRST)
    ... 'first'
    """

    value_type = str


class IntConstants(Constants):
    """
    A base class for defining a class with a set of integer constants.

    Examples
    --------
    >>> class ExampleClass(object, metaclass=IntConstants):
    ...     FIRST = 1
    ...     SECOND = 2
    ...     THIRD = 3
    ...
    >>> print(ExampleClass.all())
    ... (1, 2, 3)
    >>> print(ExampleClass.FIRST)
    ... 1
    """

    value_type = int


class Message(StrConstants):
    READ = _("üßêÔ∏è –ü—Ä–æ—á–∏—Ç–∞–Ω–æ")
    DELETE = _("üóë –£–¥–∞–ª–∏—Ç—å")
    SAVED_LINK = _("ü§ò –°—Å—ã–ª–∫—É —Å–æ—Ö—Ä–∞–Ω–∏–ª")
    NOTHING_TO_SEND = _(
        "üçª –í—Å–µ —Å—Å—ã–ª–æ—á–∫–∏ —É–∂–µ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã, –º–Ω–µ –Ω–µ—á–µ–≥–æ —Ç–µ–±–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å. –ü–æ–ø–æ–ª–Ω—è–π –∑–∞–ø–∞—Å—ã :)"
    )
    NOTHING_TO_SEND_MAILING = _(
        "‚òπÔ∏è –ú–Ω–µ —Ç–µ–±–µ –Ω–µ—á–µ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞—Å—Å—ã–ª–∫–µ! –î–∞–≤–∞–π-–¥–∞–≤–∞–π, –∑–∞–∫–∏–Ω—å –µ—â–µ "
        "—Å—Å—ã–ª–æ—á–µ–∫\n\n‚û°Ô∏è –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤: /feedback"
    )
    LINK_DELETED = _("üóë –°—Å—ã–ª–∫—É —É–¥–∞–ª–∏–ª")
    LINK_WAS_READ = _("ü§∏‚Äç‚ôÄÔ∏è –ô–æ—É, –º–∏–Ω—É—Å –æ–¥–Ω–∞ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞!")
    LINK_NOT_FOUND = _("ü§î –°—Å—ã–ª–æ–∫ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")
    FEEDBACK = _(
        "–•–æ—á–µ—à—å –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –æ —Ä–∞–±–æ—Ç–µ –±–æ—Ç–∞?\nhttps://forms.gle/uCbnjoq746AJKKdr9"
    )
    MAILING_OFF = _(
        "ü•≤ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞, –Ω–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ –º–µ–Ω—è! –ú–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å /random –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è "
        "—Å–ª—É—á–∞–π–Ω–æ–π —Å—Å—ã–ª–∫–∏ –∏–ª–∏ /links –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–∞ –µ—â–µ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö"
    )
    MAILING_ON = _(
        "ü•∞ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞! –ö—Å—Ç–∞—Ç–∏, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å /random –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–π —Å—Å—ã–ª–∫–∏ "
        "–∏–ª–∏ /links –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–∞ –µ—â–µ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö"
    )
    F_SAVED_LINKS_COUNT = _("ü§ò –î–æ–±–∞–≤–∏–ª —Å—Å—ã–ª–∫–∏ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è ({})")
    F_STATISTICS = _(
        "üìà –¢–≤–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n–î–æ–±–∞–≤–ª–µ–Ω–æ —Å—Å—ã–ª–æ–∫: {}\n–ò–∑ –Ω–∏—Ö –ø—Ä–æ—á–∏—Ç–∞–Ω–æ (–∑–∞ –≤—Å–µ –≤—Ä–µ–º—è): {} ü¶æ"
    )
    F_BOT_STATISTICS = _("üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞:\n–î–æ–±–∞–≤–ª–µ–Ω–æ —Å—Å—ã–ª–æ–∫: {}\n–ü—Ä–æ—á–∏—Ç–∞–ª–∏: {}")
    F_URL = _("üì§ {}")
    F_DELETE_URL = _("üóë –£–¥–∞–ª–∏—Ç—å {}")
    F_URL_MAILING = _(
        "üì§ –ü—Ä–∏–≤–µ—Ç! –¢–≤–æ—è —Å—Å—ã–ª–æ—á–∫–∞ –ø–æ—á–∏—Ç–∞—Ç—å –Ω–∞ —Å–µ–≥–æ–¥–Ω—è: {}\n\n‚û°Ô∏è –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤: /feedback"
    )
    F_LINKS = _("–¢–≤–æ–∏ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏ (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ {}):\n{}")
    F_LINK_ALREADY_WAS_ADDED = _("ü•≤ –°—Å—ã–ª–∫–∞ {} —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞")


class Regexp(StrConstants):
    LINK = r"(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,10}(:[0-9]{1,5})?(\/.*)?"  # noqa
    NUM_WITH_SYMBOL = r"([-+]\d+)"


welcome_text = _("""üëã –í–µ–ª–∫–æ–º!
–£ —Ç–µ–±—è –∫–∞–∫ –∏ —É –º–µ–Ω—è –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ç–µ–º, —á—Ç–æ —Ç—ã –∑–∞–±—ã–≤–∞–µ—à—å –ø—Ä–æ—á–µ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –≤ –∑–∞–∫–ª–∞–¥–∫–∞—Ö —Å—Ç–∞—Ç—å–∏?
–ë–æ—Ç –ø–æ–º–æ–∂–µ—Ç! (–Ω–∞–¥–µ—é—Å—å, –ø–æ—Ç–æ–º—É —á—Ç–æ –º–Ω–µ –ø–æ–º–æ–≥) 
–û–Ω –±—É–¥–µ—Ç –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ–±–µ –ø–æ —Å—Å—ã–ª–æ—á–∫–µ –Ω–∞ –ø—Ä–æ—á—Ç–µ–Ω–∏–µ.

–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
* –¢—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—à—å –±–æ—Ç—É –ª—é–±—É—é —Å—Å—ã–ª–∫—É
* –ñ–¥–µ—à—å –ø–æ–∫–∞ –Ω–∞—Å—Ç—É–ø–∏—Ç –≤—Ä–µ–º—è —Ä–∞—Å—Å—ã–ª–∫–∏
* –ß–∏—Ç–∞–µ—à—å —Å–≤–æ—é —Å—Ç–∞—Ç—å—é –∏ –ø–æ–º–µ—á–∞–µ—à—å –µ–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–π —É –±–æ—Ç–∞ (–ø–æ–¥ —Å—Å—ã–ª–∫–æ–π –±—É–¥–µ—Ç –∫–Ω–æ–ø–æ—á–∫–∞)
* –†–∞–¥—É–µ—à—å—Å—è —Å–≤–æ–µ–π –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏!

–ü–æ—è–≤–∏–ª–æ—Å—å –∂–µ–ª–∞–Ω–∏–µ –ø—Ä–æ—á–µ—Å—Ç—å —á—Ç–æ-—Ç–æ –∏–∑ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫, –Ω–æ –Ω–µ —Ö–æ—á–µ—à—å –∂–¥–∞—Ç—å –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞—Å—Å—ã–ª–∫–∏?
–ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—É /random :)
""")
